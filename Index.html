<!DOCTYPE html>
<html style="width:100%; height:100%;">
    <head>
        <link rel="stylesheet" type="text/css" href="css/reset.css">
        <script src="scripts/isocanvas.js"></script>
        <script type="text/javascript">
            function f() {

                var isoCanvas = new IsoCanvas(document.getElementById('isoCanvasDiv'));

                // load up tiles
                var imgs = [];
                var loadedCounter = 0;
                var numImages = 10;
                for (var i = 0; i < 10; i++) {

                    imgs.push(new Image());

                    imgs[i].onload = function() {

                        loadedCounter++;
                        if (loadedCounter == numImages) {
                            isoCanvas.tiles = imgs;
                            isoCanvas.layers.push(generateMap());
                            isoCanvas.paint();
                            window.addEventListener('resize', function(ev) {
                                //isoCanvas.defaultResizeListener(ev);
                                isoCanvas.paint();
                            });
                            window.addEventListener('click', function(ev) {                                
                                isoCanvas.defaultMouseClickListener(ev);
                                isoCanvas.paint();
                            });
                            window.addEventListener('wheel', function(ev) {
                                isoCanvas.defaultMouseWheelListener(ev);
                                isoCanvas.paint();
                            });
                        }
                    };
                }
                imgs[0].src = 'Tiles/brickpavers2.png';
                imgs[1].src = 'Tiles/concrete368a.png';
                imgs[2].src = 'Tiles/cretebrick970.png';
                imgs[3].src = 'Tiles/dirt.png';
                imgs[4].src = 'Tiles/dirtsand2.png';
                imgs[5].src = 'Tiles/rock.png';
                imgs[6].src = 'Tiles/snow.png';
                imgs[7].src = 'Tiles/stone.png';
                imgs[8].src = 'Tiles/tilable-IMG_0044-grey.png';
                imgs[9].src = 'Tiles/tileable-S7002876-grey.png';

            }

            function generateMap() {
                // generate random map
                var layer = []
                for (var y = 0; y < 30; y++) {
                    layer.push([]);
                    for (var x = 0; x < 30; x++) {
                        layer[y].push(Math.floor(Math.random()*10));
                    }
                }
                return layer;
            }

        </script>
    </head>
    <body style="width:100%; height:100%;" onload="f()">
        <div id="isoCanvasDiv" style="width:100%; height:100%;"></div>
    </body>
</html>