<!DOCTYPE html>
<html style="width:100%; height:100%;">
    <head>
        <link rel="stylesheet" type="text/css" href="css/reset.css">       
        <script src="scripts/requirejs.js"></script>
        <script type="text/javascript">
            function f() {

                // import IsoTile, IsoCanvas, and IsoTileSet modules via requirejs
                requirejs([
                    'scripts/isotile', 
                    'scripts/isocanvas',
                    'scripts/isotileset'
                ], function(isoTileNameSpace, isoCanvasNameSpace, isoTileSetNameSpace) {

                    var images = [
                        'Tiles/grass1.png',
                        'Tiles/grass2.png',
                        'Tiles/grass3.png',
                        'Tiles/water1.png',  
                        'Tiles/dirt1.png'
                    ];
                    var isoCanvas = new isoCanvasNameSpace.IsoCanvas(document.getElementById('isoCanvasDiv'));
                    
                    isoTileNameSpace.IsoTile.loadTileset(images, function(isoTileset) {

                        isoCanvas.tiles = isoTileset;
                        for (isotile of isoTileset) {
                            isotile.properties.canStack = false;
                        }
                        isoTileset[isoTileset.length-1].properties.canStack = true;

                        isoCanvas.generateRandomMap(100, 100, 10);
                        isoCanvas.paint();

                        window.addEventListener('resize', function(ev) {
                            isoCanvas.paint();
                        });
                        document.getElementById('isoCanvasDiv').addEventListener('click', function(ev) {                                
                            isoCanvas.defaultMouseClickListener(ev);
                            isoCanvas.paint();
                        });
                        document.getElementById('isoCanvasDiv').addEventListener('wheel', function(ev) {
                            isoCanvas.defaultMouseWheelListener(ev);
                            isoCanvas.paint();
                        });
                    });               
                });

            }       
        </script>
    </head>
    <body style="width:100%; height:100%;" onload="f()">
        <div id="isoCanvasDiv" style="width:100%; height:100%;"></div>
    </body>
</html>