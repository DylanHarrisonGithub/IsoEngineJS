<!DOCTYPE html>
<html style="width:100%; height:100%;">
    <head>
        <link rel="stylesheet" type="text/css" href="css/reset.css">
        <script src="scripts/isocanvas.js"></script>
        <script type="text/javascript">
            function f() {

                var isoCanvas = new IsoCanvas(document.getElementById('isoCanvasDiv'));

                // load up tiles
                var imgs = [];
                var loadedCounter = 0;
                var numImages = 10;
                for (var i = 0; i < 10; i++) {
                    imgs.push(new Image());
                    imgs[i].onload = function() {
                        loadedCounter++;
                        if (loadedCounter == numImages) {
                            drawTiles(imgs, isoCanvas);
                            isoCanvas.drawAxes();
                            window.addEventListener('resize', function(ev) {
                                drawTiles(imgs, isoCanvas);
                                isoCanvas.drawAxes();
                            });
                            window.addEventListener('click', function(ev) {
                                isoCanvas.defaultMouseClickListener(ev);
                                drawTiles(imgs, isoCanvas);
                                console.log('clicked');
                            });
                            window.addEventListener('wheel', function(ev) {
                                isoCanvas.defaultMouseWheelListener(ev);
                                drawTiles(imgs, isoCanvas);
                                console.log('zoomed');
                            });
                        }
                    };
                }
                imgs[0].src = 'Tiles/brickpavers2.png';
                imgs[1].src = 'Tiles/concrete368a.png';
                imgs[2].src = 'Tiles/cretebrick970.png';
                imgs[3].src = 'Tiles/dirt.png';
                imgs[4].src = 'Tiles/dirtsand2.png';
                imgs[5].src = 'Tiles/rock.png';
                imgs[6].src = 'Tiles/snow.png';
                imgs[7].src = 'Tiles/stone.png';
                imgs[8].src = 'Tiles/tilable-IMG_0044-grey.png';
                imgs[9].src = 'Tiles/tileable-S7002876-grey.png';

            }

            function drawTiles(imgs, isocan, ctx) {
                // draw random tiles
                for (var y = 0; y < 10; y++) {
                    for (var x = 0; x < 10; x++) {
                        //drawIsoTile(x, y,imgs[Math.floor(Math.random() * 10)], ctx);
                        isocan.drawIsoTile(
                            {'x': x, 'y': y},
                            imgs[Math.floor(Math.random() * 10)]
                        );
                    }
                }
            }

        </script>
    </head>
    <body style="width:100%; height:100%;" onload="f()">
        <div id="isoCanvasDiv" style="width:100%; height:100%;"></div>
    </body>
</html>